{"version":3,"sources":["components/Message/Message.js","components/Send/Send.js","components/Chat/Chat.js","index.js"],"names":["Message","_ref","item","react_default","a","createElement","className","user","text","Send","value","onChange","onSend","onSubmit","type","Chat","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","setListeners","socket","io","on","emit","state","currentUser","data","isLogin","addMessage","console","log","changeMessage","event","setState","inputMsg","target","validName","inputName","div","current","messages","name","message","concat","toConsumableArray","sendMessage","preventDefault","_this$state","trim","length","React","createRef","users","_this$state2","map","key","components_Message_Message","components_Send_Send","placeholder","ref","defaultValue","onClick","Component","ReactDOM","render","components_Chat_Chat","document","getElementById"],"mappings":"wUAUeA,SAPC,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,KAAH,OACdC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,WAAWJ,EAAKK,MAChCJ,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eAAeJ,EAAKM,SCWzBC,SAdF,SAAAR,GAAA,IAAGS,EAAHT,EAAGS,MAAOC,EAAVV,EAAUU,SAAUC,EAApBX,EAAoBW,OAApB,OACXT,EAAAC,EAAAC,cAAA,QAAMQ,SAAUD,EAAQN,UAAU,cAChCH,EAAAC,EAAAC,cAAA,SACES,KAAK,OACLJ,MAAOA,EACPC,SAAUA,EACVL,UAAU,kBAEZH,EAAAC,EAAAC,cAAA,UAAQS,KAAK,SAASR,UAAU,QAAhC,4BCyFWS,qBA7Fb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAYRQ,aAAe,WACbP,EAAKQ,OAASC,IAAG,kBACjBT,EAAKQ,OAAOE,GAAG,UAAW,WACxBV,EAAKQ,OAAOG,KAAK,UAAWX,EAAKY,MAAMC,eAEzCb,EAAKQ,OAAOE,GAAG,UAAW,SAAAI,GACpBd,EAAKY,MAAMG,SAASf,EAAKgB,WAAWF,KAE1Cd,EAAKQ,OAAOE,GAAG,aAAc,SAAAI,GAC3BG,QAAQC,IAAIJ,MAtBGd,EA0BnBmB,cAAgB,SAAAC,GACdpB,EAAKqB,SAAS,CACZC,SAAUF,EAAMG,OAAO9B,SA5BRO,EAgCnBwB,UAAY,SAAAlC,GACV,MAAgB,KAATA,GAAwB,aAATA,GAjCLU,EAoCnByB,UAAY,WACV,IAAMnC,EAAOU,EAAK0B,IAAIC,QAAQlC,MAC1BO,EAAKwB,UAAUlC,KACjBU,EAAKqB,SAAS,CACZR,YAAavB,EACbyB,SAAS,IAEXf,EAAKO,iBA3CUP,EA+CnBgB,WAAa,SAAAF,GACXd,EAAKqB,SAAS,SAAArC,GAAA,IAAG4C,EAAH5C,EAAG4C,SAAH,MAAmB,CAC/BN,SAAU,GACVM,SAAQ,CAAG,CAAEtC,KAAMwB,EAAKe,KAAMtC,KAAMuB,EAAKgB,UAAjCC,OAAA9B,OAAA+B,EAAA,EAAA/B,CAA+C2B,QAlDxC5B,EAqDnBiC,YAAc,SAAAb,GACZA,EAAMc,iBADe,IAAAC,EAEanC,EAAKY,MAA/BC,EAFasB,EAEbtB,YAAaS,EAFAa,EAEAb,SACjBA,EAASc,OAAOC,SAClBrC,EAAKQ,OAAOG,KAAK,UAAW,CAAEkB,KAAMhB,EAAaiB,QAASR,IAC1DtB,EAAKqB,SAAS,CAAEC,SAAU,OAxD5BtB,EAAK0B,IAAMY,IAAMC,YACjBvC,EAAKY,MAAQ,CACXC,YAAa,WACbe,SAAU,CAAC,CAAEtC,KAAM,MAAOC,KAAM,SAChC+B,SAAU,GACVP,SAAS,EACTyB,MAAO,IAETxC,EAAKQ,OAAS,KAVGR,wEA8DV,IAAAyC,EACqDtC,KAAKS,MAAzDgB,EADDa,EACCb,SAAUN,EADXmB,EACWnB,SAAUT,EADrB4B,EACqB5B,YAAaE,EADlC0B,EACkC1B,QADlC0B,EAC2CD,MAClD,OAAKzB,EAUH7B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACZuC,EAASc,IAAI,SAACzD,EAAM0D,GAAP,OACZzD,EAAAC,EAAAC,cAACwD,EAAD,CAAS3D,KAAMA,EAAM0D,IAAKA,QAIhCzD,EAAAC,EAAAC,cAACyD,EAAD,CACEpD,MAAO6B,EACPwB,YAAY,qBACZpD,SAAUS,KAAKgB,cACfxB,OAAQQ,KAAK8B,eApBf/C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SAAO2D,IAAK5C,KAAKuB,IAAKsB,aAAcnC,IACpC3B,EAAAC,EAAAC,cAAA,UAAQ6D,QAAS9C,KAAKsB,WAAtB,cAtESyB,cCDnBC,IAASC,OAAOlE,EAAAC,EAAAC,cAACiE,EAAD,MAAUC,SAASC,eAAe","file":"static/js/main.36f4128f.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Message.css';\r\n\r\nconst Message = ({ item }) => (\r\n  <div className=\"message-container\">\r\n    <span className=\"message\">{item.user}</span>\r\n    <span className=\"message end\">{item.text}</span>\r\n  </div>\r\n);\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport './Send.css';\r\n\r\nconst Send = ({ value, onChange, onSend }) => (\r\n  <form onSubmit={onSend} className=\"send-block\">\r\n    <input\r\n      type=\"text\"\r\n      value={value}\r\n      onChange={onChange}\r\n      className=\"input-message\"\r\n    />\r\n    <button type=\"submit\" className=\"send\">\r\n      Send\r\n    </button>\r\n  </form>\r\n);\r\n\r\nexport default Send;\r\n","import React, { Component } from 'react';\r\nimport Message from '../Message';\r\nimport Send from '../Send';\r\nimport io from 'socket.io-client';\r\nimport './Chat.css';\r\n\r\nclass Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.div = React.createRef();\r\n    this.state = {\r\n      currentUser: 'Anonimus',\r\n      messages: [{ user: 'Owl', text: 'test' }],\r\n      inputMsg: '',\r\n      isLogin: false,\r\n      users: {},\r\n    };\r\n    this.socket = null;\r\n  }\r\n\r\n  setListeners = () => {\r\n    this.socket = io('localhost:5000');\r\n    this.socket.on('connect', () => {\r\n      this.socket.emit('addUser', this.state.currentUser);\r\n    });\r\n    this.socket.on('message', data => {\r\n      if (this.state.isLogin) this.addMessage(data);\r\n    });\r\n    this.socket.on('updateUser', data => {\r\n      console.log(data);\r\n    });\r\n  };\r\n\r\n  changeMessage = event => {\r\n    this.setState({\r\n      inputMsg: event.target.value,\r\n    });\r\n  };\r\n\r\n  validName = user => {\r\n    return user !== '' && user !== 'Anonimus';\r\n  };\r\n\r\n  inputName = () => {\r\n    const user = this.div.current.value;\r\n    if (this.validName(user)) {\r\n      this.setState({\r\n        currentUser: user,\r\n        isLogin: true,\r\n      });\r\n      this.setListeners();\r\n    }\r\n  };\r\n\r\n  addMessage = data => {\r\n    this.setState(({ messages }) => ({\r\n      inputMsg: '',\r\n      messages: [{ user: data.name, text: data.message }, ...messages],\r\n    }));\r\n  };\r\n  sendMessage = event => {\r\n    event.preventDefault();\r\n    const { currentUser, inputMsg } = this.state;\r\n    if (inputMsg.trim().length) {\r\n      this.socket.emit('message', { name: currentUser, message: inputMsg });\r\n      this.setState({ inputMsg: '' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { messages, inputMsg, currentUser, isLogin, users } = this.state;\r\n    if (!isLogin) {\r\n      return (\r\n        <div className=\"login\">\r\n          <span>Welcome</span>\r\n          <input ref={this.div} defaultValue={currentUser} />\r\n          <button onClick={this.inputName}>Ok</button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"chat\">\r\n        <div className=\"message-list\">\r\n          <div className=\"messages\">\r\n            {messages.map((item, key) => (\r\n              <Message item={item} key={key} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <Send\r\n          value={inputMsg}\r\n          placeholder=\"write something...\"\r\n          onChange={this.changeMessage}\r\n          onSend={this.sendMessage}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Chat from './components/Chat';\n\nReactDOM.render(<Chat />, document.getElementById('root'));\n"],"sourceRoot":""}